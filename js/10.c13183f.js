(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{118:function(p,n){p.exports={markdown:'<h2>聊聊我的毕设-度资讯</h2>\n<blockquote>\n<p>人生有很多阶段，而现在我马上要结束大学生活，迎接另一个全新的阶段了。最近每每想到毕业，心里都充满着不舍，舍不得 125 这几个生活几年的小伙伴们，舍不得 5 班的小伙伴们，舍不得重邮（虽然我们都喜欢吐槽重邮，呵呵，但是离别之际，心中还是充满不舍）。虽然分离是没有办法的，但我想说“相离莫相忘，且行且珍惜”。</p>\n</blockquote>\n<h3>写在前面</h3>\n<p>在这里，真的不得不说我为什么花费不少精力去完成这个作品。在实习完回校之后，一直都在做这个作品，身边很多朋友看见了，也经常会比较奇怪地问我“都实习这么长时间了，难得回来学校还不好好休息。再说了，做这么好干啥呢，又没有什么好处，大家都是从网上抄的”。</p>\n<p>我之所以花不少精力去完成这个作品，绝对不仅仅是为了毕业设计，更多的是为了能在大学毕业之前，能做出一个能让自己自豪的作品。“<strong>把一件事情做到极致</strong>”，没错，我就是要把这个作品做到极致，做到能让自己自豪，能拿得出手（虽然它现在还是有不少瑕疵）。或者用老罗在发布会上面说过的一句话总结“<strong>我不是为了输赢，我就是认真</strong>”。第一次听到这句话的时候，令我比较震撼。</p>\n<p>好吧，废话不多说，入正题。</p>\n<h3>关于作品</h3>\n<p>度资讯，顾名思义，就是通过百度这个平台去获取资讯。本作品整合了百度新闻、百度视频、百度图片这三个产品的 webapp 版本的，其中新闻的比例最大，比较对这个产品比较熟悉，之前就是做这个产品的 webapp 版本的。</p>\n<p>上文提及，这个作品是一款 webapp。那么何为 webapp 呢？webapp 与一般的手机端网站的区别是什么呢？</p>\n<p>我认为，一款 webapp 应该具有以下几个特点。</p>\n<ul>\n<li>用户体验：让用户能很容易完成任务，并利用了设备本地的一些功能（即 HTML5 相关的 API），比如客户端缓存、地理位置等；</li>\n<li>界面设计：丰富的视觉体验，UI 类似于 native app 的用户界面；</li>\n<li>交互方式：注重用户的交互、参与和完成任务，而不是让他们仅仅浏览网页，一般体现在<strong>局部刷新</strong>、<strong>平滑切换</strong>等效果上；（这也是 webapp 和一般的手机端网站最大的区别。）</li>\n<li>富客户端框架模型（JS 密集型）：webapp 的业务逻辑方面基本上都是由 JS 来完成；</li>\n</ul>\n<p>度资讯是用百度工程师-大民所写的 Rocket 框架来完成的。下面简单介绍一下这个框架吧。</p>\n<p>许多前端同学也许不了解 Rocket（可能也和作者有关，毕竟大民比较低调），但是应该都听过 Backbone。Rocket 正是在 Backbone 的基础上构建的一个 webapp framework，能比较快速地构建 webapp。这个框架还是比较好用的，但在这里就不做展开了，有兴趣的同学可以看看它的<a href="http://258i.com/template/howtorocket/howtorocket.html">官方文档</a>，学习这个框架之前，需要对 Backbone 有一定的了解哦。当然，任何事物毕竟不是十全十美，在后期的开发中，我也发现 Rocket 的一些小不足。</p>\n<p>除了 Rocket 之前，那么数据怎么来呢？本作品的数据通过两种方式：server rewrite 和 jsonp。</p>\n<p>server rewrite：新闻和图片部分采用 FIS 的 rewrite 插件获取数据，大概原理是让所有的请求都转移到根目录的 index.php 文件里面，用一些正则表达式判断是否请求数据，若为 true，则访问 data.php，该文件会通过伪造手机请求头信息进行访问，再把数据打印出来，达到“偷数据”的效果。</p>\n<p>jsonp：视频部分采用 jsonp 的方式，因为线上视频的 webapp 版本就是通过 jsonp 方式去获取获取的。</p>\n<p>用下面这张图可以了解这个作品的整体结构：</p>\n<h3>细说作品</h3>\n<p>由于代码中涉及到比较多百度的接口，这不是不合法的，不能用作任何商业用途。因此不打算开源这个作品，望理解。</p>\n<p>下面用一些截图来展示这个作品。</p>\n<h4>新闻部分</h4>\n<p>通过手机浏览器或者 chrome 手机模拟浏览器中打开应用，首先进去眼球的就是新闻的首页，也就是 index 页面，如<code>图1 新闻index上部分页面</code>和<code>图2 新闻index下部分页面</code>所示。用户在这个页面里面，可以选择不同的子页面阅览不同的新闻。新闻分四大类：话题、频道、媒体、百家，除此之外，还可以阅览本地新闻，可以选择不同地区的新闻进行阅览。</p>\n<p>图 1 新闻 index 页面上部分</p>\n<p>图 2 新闻 index 页面下部分</p>\n<p>用户点击左侧列表按钮后，可显示左侧侧边栏。在左边侧边栏中，用户可以自己选择自己订阅的栏目进行阅览。如<code>图3 新闻index页面侧边栏</code>所示：</p>\n<p>图 3 新闻 index 页面-侧边栏</p>\n<p>用户点击新闻收藏和精品推送，会分别进去展示新闻收藏和精品推送新闻的展示页面，如<code>图4 新闻收藏collect页面</code> 和 <code>图5 推送新闻push页面</code>。</p>\n<p>图 4 新闻收藏 collect 页面</p>\n<p>图 5 推送新闻 push 页面</p>\n<p>用户点击上面页面的灰层会返回 index 页面，回到图 1 所示页面，用户点击头部的下拉按钮，会看到栏目编辑列表，如<code>图6 新闻index页面-管理栏目</code>，点击栏目后，会进去用户想进去的页面，假设我点击本地，就会进入本地新闻。</p>\n<p>图 6 新闻 index 页面-管理栏目</p>\n<p>用户进入本地新闻栏目后，此时会调用 HTML5 的地理位置接口，获取用户当前所在的位置的经纬度，获取经纬度后，会调用百度地图的接口获取所在城市，若该城市和用户所在的城市不一致就会出现“切换城市”的提示，如<code>图7 新闻index-本地新闻-识别当前城市</code>所示：</p>\n<p>图 7 新闻 index-本地新闻-识别当前城市</p>\n<p>点击确定后，就会切换到重庆这个城市，如<code>图7 新闻index-本地新闻</code>所示：</p>\n<p>图 7 新闻 index-本地新闻</p>\n<p>用户点击头部的搜索按钮，会进去新闻搜索页面 search 页面，如<code>图8 新闻search-新闻搜索页面</code>所示，在输入框中输入文字，会调用百度首页的提示接口，出现相关提示，如<code>图9 新闻search-新闻搜索提示页面</code>所示。</p>\n<p>图 8 新闻 search-新闻搜索页面</p>\n<p>图 9 新闻 search-新闻搜索提示页面</p>\n<p>用户点击新闻列表后，会进去正文页 page 页面，如<code>图10 新闻page-正文页面</code>所示。</p>\n<ul>\n<li>点击正文页头部的左侧按钮会返回上一个页面；</li>\n<li>点击右侧的按钮，会弹出额外操作（分享、写评论、进去评论页面、收藏），如<code>图11 新闻page-正文页额外操作页面</code>所示；</li>\n<li>点击分享按钮，会弹出分享框，如<code>图12 新闻page-正文页分享页面</code>所示；</li>\n<li>点击写评论按钮，会调到评论框的位置，如<code>图13 新闻page-正文页评论框页面</code>所示；</li>\n<li>点击收藏按钮，会收藏该篇文章，这个应用是通过调用 HTML5 的本地存储功能，将该篇新闻的 id 存储到本地。</li>\n</ul>\n<p>图 10 新闻 page-正文页面</p>\n<p>图 11 新闻 page-正文页额外操作页面</p>\n<p>图 12 新闻 page-正文页分享页面</p>\n<p>图 13 新闻 page-正文页评论框页面</p>\n<p>用户点击正文页图片后，会进去该篇新闻的图集页 image 页面，如<code>图14 新闻image-图集页页面</code>所示。</p>\n<ul>\n<li>点击图集页头部按钮，可以切换图集页的浏览模式-瀑布流模式，如<code>图15 新闻iamge-图集页瀑布流模式页面</code>所示。</li>\n<li>点击头部右边按钮，会弹出下拉按钮列表，有分享按钮和查看原图按钮；</li>\n<li>点击分享按钮，会弹出分享框，如<code>图16 新闻image-图集页分享页面</code>所示；</li>\n<li>点击查看原图按钮，会显示原图。</li>\n</ul>\n<p>图 14 新闻 image-图集页页面</p>\n<p>图 15 新闻 iamge-图集页瀑布流模式页面</p>\n<p>图 16 新闻 image-图集页分享页面</p>\n<h4>视频部分</h4>\n<p>在侧边栏点击视频“精选”这个栏目，就可以进去视频的首页 video 页面，如<code>图17 视频video-首页页面</code>所示。</p>\n<ul>\n<li>点击头部下拉按钮，会显示栏目下拉框，如<code>图18 视频video-首页下拉框页面</code>所示；</li>\n<li>点击头部侧边栏会显示视频侧边栏，基本操作如新闻部分，如<code>图 19 视频video-首页侧边栏页面</code>所示；</li>\n<li>点击头部搜索按钮，会进去视频搜索页面；</li>\n<li>点击侧边栏的栏目按钮，和头部的栏目按钮，都可以进去对应的栏目，简单举例两个栏目，如<code>图20 视频video-栏目电视台直播页面</code>和<code>图21 视频video-栏目电视剧页面</code>所示。</li>\n</ul>\n<p>图 17 视频 video-首页页面</p>\n<p>图 18 视频 video-首页下拉框页面</p>\n<p>图 19 视频 video-首页侧边栏页面</p>\n<p>图 20 视频 video-栏目电视台直播页面</p>\n<p>图 21 视频 video-栏目电视剧页面</p>\n<p>视频的阅览方式：会判断用户是否安装“百度视频”客户端，若安装了，则跳转到视频客户端上面阅览，若没安装，则跳转到视频的原页面（因为百度是以搜索为核心，所以视频内容来源是别的视频网站）</p>\n<h4>图片部分</h4>\n<p>图片最主要的功能为搜索，所有栏目都是以搜索为核心进行开发，举个例子：若点击“动漫”栏目，则跳转到以搜索“动漫”字段的页面。</p>\n<p>与前面两个大分类相似，图片部分的侧边栏和搜索按钮都是采用公共的 globalview：sideBar。图片首页的头部没有分类栏目。首页如<code>图22 图片img-首页</code>所示。</p>\n<p>图 22 图片 img-首页</p>\n<p>图 23 图片 img-侧边栏</p>\n<p>图 24 图片 img-栏目</p>\n<p>图 25 图片 imgsearch-图片搜索</p>\n<h4>作品瑕疵</h4>\n<p>前文也提及，本作品还未完全做完，还有一部分，还存在不少瑕疵。</p>\n<ul>\n<li>返回按钮：目前采用记录上级路径和当前路径来回切换的方式，若深度达到三级，会出现问题。</li>\n<li>低端 Android 机器：保证在低端 Android 机器上运行流畅。</li>\n<li>阅读模式（nes）：获取手机用户的网络环境，根据网络环境选择默认的浏览模式（无图、小图、大图），目前还未探索到合适的方法去获取网络环境。之前舒文说的 html5 接口，给搞忘了，晕。</li>\n<li>地区的选择（news）：目前还未做这部分；</li>\n<li>管理栏目和订阅栏目（news）：细节部分还未做好；</li>\n<li>正文页（news）：改变字号的功能未做；</li>\n<li>视频分类维度的选择（video）；</li>\n<li>视频二级页面（video）：部分视频需要二级栏目显示；</li>\n<li>图片搜索功能（img）：上传图片的接口木有调用出来；</li>\n<li>图片热搜词（img）：抓包找不到这个接口（img 的数据来源和 video、news 有所不同）；</li>\n<li>图片的图集页（img）：img 的图集页实现方式与 news 图集页的实现方式不一样，img 是采用三个节点（前中后）来回切换的方式实现，因此需要重写插件。</li>\n</ul>\n<p>看到上面这么多需求，感觉蛋都碎了一地了，呵呵！</p>\n<h3>写在最后</h3>\n<p>完成这个作品之余，真的挺感谢百度 news 团队的小伙伴们，尤其是我的导师大民，感谢他把我带进了移动端前端开发的领域。移动端开发很美妙，希望自己能专注于这一块。虽然以后不知道还有没有机会和你们共事，但这段时间让我真的学到了不少东西，不仅仅是在技术上，还有做事方式、态度等等方面。</p>\n<p>马上毕业了，即将开启另一个新的阶段。我很期待，期待见识一下三七、舒文、铁军等等前端大大的功力，期待新的一群小伙伴，期待自己的代码运行在更多的用户基础上，期待自己亲身感受双 11 带来的挑战。同时，我也有点忧虑，担心过去 tmall，跟不上节奏，毕竟后面木有时间去实习，感觉已经落后于其他同届的小伙伴一大截了（表示有点担忧）。总的来说，未来的挑战将越来越大。</p>\n<p>写到这里，突然感觉没有写下去的必要，因为把口号谈得再响亮，而不去实践，都是无济于事的。在大四求职这条路上，我还是比较幸运的，虽然刚开始遇到一些挫折，但后面还是得到了国内不少优秀前端团队的青睐。最终还是选择了自己内心最向往的一支团队。</p>\n<p>且行且珍惜吧！只有好好珍惜目前所拥有的，才有机会去获得更多。</p>\n'}}}]);